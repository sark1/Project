name: npm pipeline

on:
 workflow_call:
      outputs:
          result:
              value: ${{ jobs.test.outputs.output1 }}

jobs:
  test:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        node-version: [12.x]
    outputs:
      output1: ${{ steps.step1.outputs.result }}
    steps:
  #    - name: pulling image from docker hub and building
  #      run: |
  #         mkdir myfiles
  #         cd myfiles
  #         echo 'FROM amazon/aws-lambda-nodejs'     > Dockerfile
  #         docker build .
  #         docker run -it nodejs-chaisindh:${{ matrix.node-version }}
  #         npm install
      - name: Install dependencies
        run: echo "npm run build"
      - name: Run test
        run: echo "npm run test"
      - name: building image 
        run: |
          pwsh -command 'Invoke-WebRequest -Uri "https://github.com/chaithragudimalla/Project/blob/main/.github/workflows/Dockerfile.txt" -OutFile "Dockerfile.txt"'
      - id: step1
        run: echo "::set-output name=result::Dockerfile.txt"
      - name: building docker image
        run: |
           ls -l
           readlink -f Dockerfile.txt
    
  
      


